var Wedding={};Wedding.photos={},Wedding.currentAlbumIndex=0,Wedding.Initialize=function(){Wedding.$albumModal=$("#mask"),Wedding.$tooltip=$("#DynamicTooltip"),$("select").material_select(),$(".modal-trigger").leanModal(),Wedding.$scrollElements=$("#Navigation li").map(function(){for(var e=$(this).attr("class").split(/\s+/),t=null,a=0;a<e.length;a++){var d=e[a].indexOf("-nav");if(d>0){t=$("#"+e[a].substr(0,d));break}}return t}),$("ul#Navigation li, ul#NavigationSmall li").on("click",function(e){var t=$(e.target);t.is("li")||(t=t.closest("li"));var a=t.attr("class").split(" ")[0];t.parent().find(".selected").removeClass("selected"),t.addClass("selected");var d=a.replace("-nav","");Wedding.ScrollNav(d)}),$("#home .rsvpText").on("click",function(e){Wedding.ScrollNav("rsvp")}),$("#TeamTypeSelector").change(function(){switch($(this).val()){case"rand":$("#TeamTypeNumBuilders").removeClass("none"),$("#TeamTypeTeamName").addClass("none");break;case"join":$("#TeamTypeNumBuilders").removeClass("none"),$("#TeamTypeTeamName").removeClass("none");break;default:$("#TeamTypeNumBuilders").addClass("none"),$("#TeamTypeTeamName").addClass("none")}}),$(".navBarRight").click(function(e){var t=$(e.target),a=t.parent().find(".boxLeft"),d=t.parent().find(".boxRight"),n=t.parent().find(".navBarLeft");a.removeClass("moveRight"),d.removeClass("moveRight"),a.addClass("moveLeft"),d.addClass("moveLeft"),t.removeClass("visible").addClass("hidden"),n.removeClass("hidden").addClass("visible")}),$(".navBarLeft").click(function(e){var t=$(e.target),a=t.parent().find(".boxLeft"),d=t.parent().find(".boxRight"),n=t.parent().find(".navBarRight");a.removeClass("moveLeft"),d.removeClass("moveLeft"),a.addClass("moveRight"),d.addClass("moveRight"),t.removeClass("visible").addClass("hidden"),n.removeClass("hidden").addClass("visible")}),$(".hearts .highlight, .boats .highlight").on("hover click",function(e){var t=$(e.target);t.parent().find(".selected").removeClass("selected"),t.addClass("selected");var a=$(e.target).attr("data-heart-num"),d=$(e.target).closest(".content-box").find(".storyInfo");d.find(".selected").removeClass("selected"),d.find(".story"+a).addClass("selected")}),$("#ChoiceSelector").on("click",function(e){e.stopPropagation();var t=$(e.target);t.hasClass("imgChooserImg")&&(t.parent().hasClass("imgSelected")||(t.hasClass("herStory")?($("#story .hisStoryText").addClass("none"),$("#story .herStoryText").removeClass("none"),t.closest(".card").find(".card-image img").attr("src","img/couple/dress_small.jpg")):($("#story .herStoryText").addClass("none"),$("#story .hisStoryText").removeClass("none"),t.closest(".card").find(".card-image img").attr("src","img/couple/dress_small_inv.jpg")),t.closest("#ChoiceSelector").find(".imgChooser").toggleClass("imgSelected")))}),$(".tooltip").on("hover",function(){}),$(".tooltip").on("mouseover",Wedding.Hover_OpenTooltip),$(".tooltip").on("mouseout",function(e){Wedding.$tooltip.addClass("none")}),Wedding.Album_LoadAlbums(),Wedding.$albumModal.find(".imgNavigatorLeft").on("click",Wedding.Album_OnPrevClick),Wedding.$albumModal.find(".imgNavigatorRight").on("click",Wedding.Album_OnNextClick),$(".photo-album").on("click",Wedding.Album_OnImageClick),Wedding.$albumModal.click(function(){$(this).hide()}),$("#rsvp").find("form").on("submit",Wedding.Submit_weddingRsvp),$(window).on("scroll",Wedding.ScrollSpy)},Wedding.LastId="home",Wedding.ScrollSpy=function(){var e=$(this).scrollTop()+40,t=Wedding.$scrollElements.map(function(){return $(this).offset().top<e?this:void 0});t=t[t.length-1];var a=t&&t.length?t[0].id:"";Wedding.LastId!==a&&(Wedding.LastId=a,$selectedNavs=$("."+a+"-nav"),$selectedNavs.each(function(){$(this).parent().find(".selected").removeClass("selected"),$(this).addClass("selected")}))},Wedding.Submit_weddingRsvp=function(e){e.preventDefault(),data="{}";var t=$("#first_name"),a=$("#last_name"),d=$("#email"),n=$("#numguests"),o=$("#campFri"),i=$("#campSat"),s=$("#TeamTypeSelector"),l=($("#numparticipants"),$("#team_name")),r=$([]).add(t).add(a).add(d).add(n).add(o).add(i).add(l).add(s).add(numparticipants);$.ajax({type:"POST",url:"api/weddingRsvp.php",data:r.serialize(),success:function(e){$("#rsvp form").addClass("none"),$("#ThankYouNote").removeClass("none")},error:function(e){alert("Error on the page, try again later please!")},dataType:"json"})},Wedding.Hover_OpenTooltip=function(e){if($target=$(e.target),!$target.hasClass("noHover")){var t=$target.attr("title"),a=$("<span />").addClass("tooltip").html(t);Wedding.$tooltip.html("").append(a).removeClass("none");var d=Wedding.$tooltip.width()/2,n=$target.width()/2,o=$target.offset(),i=o.top+68,s=o.left+n-d;Wedding.$tooltip.offset({top:i,left:s})}},Wedding.Album_LoadAlbums=function(){$(".photo-album").each(function(){var e=parseInt($(this).attr("data-album-index")),t=$(this).find(".photo"),a=!this.hasAttribute("data-no-story");Wedding.photos[e]={},Wedding.photos[e].photoList=t.map(function(){return $(this).attr("data-image")}).get(),a?Wedding.photos[e].storyList=t.map(function(){return this.hasAttribute("data-story")?$(this).attr("data-story"):$(this).find(".data-story").html()}).get():Wedding.photos[e].storyList=t.map(function(){return this.hasAttribute("data-summary")?$(this).attr("data-summary"):$(this).find(".data-summary").length>0?$(this).find(".data-summary").html():""}).get(),Wedding.photos[e].titleList=t.map(function(){return this.hasAttribute("data-title")?$(this).attr("data-title"):$(this).find(".data-title").html()}).get(),Wedding.photos[e].photoIndex=0;var d=this.hasAttribute("data-theme")?$(this).attr("data-theme"):"normal";Wedding.photos[e].photoTheme=d})},Wedding.Album_OnImageClick=function(e){e.preventDefault(),$target=$(e.target),$target.hasClass("photo")||($target=$target.closest(".photo")),Wedding.$albumModal.fadeIn(300),Wedding.$albumModal.find("#maskBg").fadeTo("fast",.8);var t=$target.attr("data-image");Wedding.currentAlbumIndex=parseInt($target.closest(".photo-album").attr("data-album-index")),Wedding.Album_SetPhotoIndex(Wedding.currentAlbumIndex,Wedding.photos[Wedding.currentAlbumIndex].photoList.indexOf(t)),Wedding.Album_LoadPhoto(Wedding.currentAlbumIndex),Wedding.$albumModal.removeClass().addClass("flow-text-parent-xsmall").addClass(Wedding.photos[Wedding.currentAlbumIndex].photoTheme)},Wedding.Album_OnNextClick=function(e){e.preventDefault(),e.stopPropagation(),Wedding.Album_NextPhoto(Wedding.currentAlbumIndex)},Wedding.Album_OnPrevClick=function(e){e.preventDefault(),e.stopPropagation(),Wedding.Album_PreviousPhoto(Wedding.currentAlbumIndex)},Wedding.Album_UpdateArrows=function(e){var t=Wedding.photos[e].photoIndex,a=Wedding.photos[e].photoList.length;0===t?Wedding.$albumModal.find(".imgNavigatorLeft").addClass("none"):Wedding.$albumModal.find(".imgNavigatorLeft").removeClass("none"),t>=a-1?Wedding.$albumModal.find(".imgNavigatorRight").addClass("none"):Wedding.$albumModal.find(".imgNavigatorRight").removeClass("none")},Wedding.Album_NextPhoto=function(e){Wedding.Album_SetPhotoIndex(e,Wedding.photos[e].photoIndex+1),Wedding.Album_LoadPhoto(e)},Wedding.Album_PreviousPhoto=function(e){Wedding.Album_SetPhotoIndex(e,Wedding.photos[e].photoIndex-1),Wedding.Album_LoadPhoto(e)},Wedding.Album_SetPhotoIndex=function(e,t){0>t&&(t=0),t>=Wedding.photos[e].photoList.length&&(t=Wedding.photos[e].photoList.length),Wedding.photos[e].photoIndex=t},Wedding.Album_LoadPhoto=function(e){var t=Wedding.$albumModal.find(".image-wrapper"),a=Wedding.$albumModal.find(".caption-bottom-wrapper"),d=Wedding.$albumModal.find(".caption-top-wrapper");t.html(""),a.html(""),d.removeClass("none").html("");var n=Wedding.photos[e].photoIndex;if(Wedding.photos[e].titleList.length>0){var o=Wedding.photos[e].titleList[n],i=$("<div/>").addClass("caption").addClass("valign").html(o);d.append(i)}else d.addClass("none");var s="img/"+Wedding.photos[e].photoList[n],l=$("<img/>",{src:s});if(l.addClass("personImage").addClass("valign"),l.fadeIn(500),t.append(l),Wedding.photos[e].storyList.length>0){var r=Wedding.photos[e].storyList[n];if(void 0!==r){r=$.trim(r);var g=$("<div/>").addClass("caption").addClass("valign").html(r);0===r.length?a.addClass("none"):(r.length<300&&a.addClass("smallBlock"),a.append(g),a.removeClass("none"))}else a.addClass("none")}else a.addClass("none");Wedding.Album_UpdateArrows(e)},Wedding.AnimateRight=function(){},Wedding.ScrollNav=function(e){$("html,body").animate({scrollTop:$("."+e).offset().top},"slow")},Wedding.Scroll=function(e){var t,a,d=[],n=$(window).scrollTop(),o=$(".slide");for(o.each(function(){d.push(parseInt($(this).offset().top,10))}),a=0;a<d.length;a++){if("next"==e&&d[a]>n){t=o.get(a);break}if("prev"==e&&a>0&&d[a]>=n){t=o.get(a-1);break}}return t&&$.scrollTo(t,{duration:750}),!1},$(function(){Wedding.Initialize()});